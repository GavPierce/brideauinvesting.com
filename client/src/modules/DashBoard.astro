---
/* eslint max-lines: 'off' */
---

<script>
	const response = await fetch(
		`https://api.brideauinvesting.com/api/visits/totalWeekly`,
	);
	// Adjust the date range
	const data = await response.json();
	const totalWeekly = data.count;
	const totalWeeklyElement = document.getElementById('totalWeekly');
	if (totalWeeklyElement) {
		totalWeeklyElement.innerHTML = totalWeekly;
	}
</script>

<div class="px-4 pt-2">
	<!-- Slim Weekly Visits Bar -->
	<div class="mb-3 px-3 py-1.5 bg-gradient-to-r from-blue-50 to-white border border-blue-100 rounded-md shadow-sm dark:from-gray-800 dark:to-gray-800/80 dark:border-gray-700">
		<div class="flex items-baseline gap-2">
			<h3 class="text-xs font-medium text-blue-700 dark:text-blue-300">Visits This Week</h3>
			<p class="text-lg font-extrabold text-blue-900 dark:text-white" id="totalWeekly">â€”</p>
		</div>
	</div>

	<!-- Tabs Widget -->
	<div class="p-4 bg-white border border-gray-200 rounded-xl shadow-sm dark:border-gray-700 sm:p-6 dark:bg-gray-800">
			<ul
				class="hidden text-sm font-medium text-center text-gray-600 divide-x divide-gray-200 rounded-lg sm:flex dark:divide-gray-600 dark:text-gray-300"
				id="fullWidthTab"
				data-tabs-toggle="#fullWidthTabContent"
				role="tablist"
			>
				<li class="w-full">
					<button
						id="visits-tab"
						role="tab"
						class="inline-block w-full p-3 rounded-tl-lg bg-gray-50 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:hover:bg-gray-600"
						>Channel Visits</button
					>
				</li>
				<li class="w-full">
					<button
						id="faq-tab"
						type="button"
						role="tab"
							class="inline-block w-full p-3 bg-gray-50 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:hover:bg-gray-600"
						>Channel Users</button
					>
				</li>
				<li class="w-full">
					<button
						id="about-tab"
						role="tab"
						class="inline-block w-full p-3 rounded-tr-lg bg-gray-50 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:hover:bg-gray-600"
						>User Visits</button
					>
				</li>
			</ul>

			<div class="border-t border-gray-200 dark:border-gray-600 flex flex-wrap">
				<!-- Column: Channel Visits -->
				<div class="pt-4 overflow-y-scroll h-[30em] w-full lg:w-1/3" id="visits" role="tabpanel" aria-labelledby="visits-tab">
					<div class="">
						<label for="channel-tabs1" class="sr-only">Select channel</label>
						<select
							id="channel-tabs1"
							class="bg-gray-50 border-0 border-b border-gray-200 text-gray-900 text-sm rounded-t-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white"
						>
						</select>
					</div>
					<ul role="list" id="visits-list" class="divide-y divide-gray-200 dark:divide-gray-700"></ul>
				</div>

				<!-- Column: Channel Users -->
				<div class=" pt-4 overflow-y-scroll h-[30em] w-full lg:w-1/3" id="faq" role="tabpanel" aria-labelledby="faq-tab">
					<div class="">
						<label for="channel-tabs2" class="sr-only">Select channel</label>
						<select
							id="channel-tabs2"
							class="bg-gray-50 border-0 border-b border-gray-200 text-gray-900 text-sm rounded-t-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white"
						>
						</select>
					</div>
					<ul role="list" id="channel-list" class="divide-y divide-gray-200 dark:divide-gray-700"></ul>
				</div>

				<!-- Column: User Visits Search -->
				<div class=" pt-4 overflow-y-scroll max-h-[30em] w-full lg:w-1/3" id="about" role="tabpanel" aria-labelledby="about-tab">
					<div class="flex items-center justify-center mb-4 gap-2">
						<span class="text-gray-500 dark:text-gray-300">@</span>
						<input
							id="user-input"
							placeholder="Search handle"
							class="bg-gray-50 border border-gray-200 text-gray-900 text-sm rounded-md focus:ring-blue-500 focus:border-blue-500 block w-2/3 p-2 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white"
						/>
					</div>
					<div class="text-sm font-medium text-center" id="user-info"></div>
					<ul role="list" id="user-list" class="divide-y divide-gray-200 dark:divide-gray-700">
						<li class="py-3 text-gray-400 text-sm" id="user-empty" style="display:none;">No visits found for this user.</li>
					</ul>
				</div>
			</div>
		</div>
	</div>
</div>
<!--  -->

<script>
	import './DashBoard.client.js';
</script>

<style is:global>
	/* chart styles */
	.apexcharts-tooltip {
		@apply bg-white dark:bg-gray-700 text-gray-500 dark:text-gray-400 border-0 rounded-lg shadow-lg !important;
	}

	.apexcharts-tooltip .apexcharts-tooltip-title {
		@apply py-2 px-4 bg-gray-100 dark:bg-gray-600 border-b border-gray-200 dark:border-gray-500 !important;
	}

	.apexcharts-xaxistooltip {
		@apply text-gray-500 border-0 bg-white dark:bg-gray-700 dark:text-gray-300 rounded-lg shadow-lg !important;
	}

	.apexcharts-tooltip .apexcharts-tooltip-text-y-value {
		@apply dark:text-white;
	}

	.apexcharts-xaxistooltip-text {
		@apply font-medium text-sm !important;
	}

	.apexcharts-xaxistooltip:before,
	.apexcharts-xaxistooltip:after {
		@apply border-0 !important;
	}
</style>
